## Автоматизация создания тестовых CDR

В папке src/main/java/com/Nexign/utils/ лежит файл CdrGenerator.java. Предназначен для автоматической генерации случайных CDR-файлов. В результате работы алгоритма получаем следующие файлы:

1. cdr_valid.json – файл с валидными 10 записями CDR 
2. cdr_bad_flag.json – файл с одной записью с некорректным флагом
3. cdr_invalid_dates.json – файл с одной записью с некорректной датой (дата начала позже даты конца)
4. cdr_invalid_msisdn.json – файл с некорректным форматом номера телефона 
4. cdr_missing_field.json – файл с пропущенным полем
5. cdr_nonexistent_operator.json – несуществующий оператор (некорректный номер)

Код гибкий, позволяет добавлять любые другие типы некорректных проверок для генерации данных. Исходные данные и требования лежат по ссылке https://docs.google.com/spreadsheets/d/1Z3PP9ipYX9FlLFWhs0BKGFT_9WMVagtTPuESBTi5ByA/edit?usp=sharing

Записи в CDR файле расположены в хронологическом порядке, записи пересекающие рубеж суток 00:00 разделены на две записи.

В данный момент генерация ведется по рандомным msisdn, но можно взять те, что лежат у нас в базе и генерировать из мапы реальных наших абонентов.


## Автотесты на API сервиса с использованием RestAssured


## Автотесты на валидацию CDR сервисом BRT

План тестирования для написания автотеста:
- Предусловия: 
Сгенерированные файлы для тестирования лежат в папке [Файлы для тестирования BRT](https://drive.google.com/drive/folders/17oAoHgWyYd8rFhmL_HNaUA-M7aJ1ccWh)

- Сценарий:
  1. В цикле считывать по очереди каждый из 15 файлов. Среди них один валидный и 14 с невалидными данными
  2. Формировать тело запроса с содержимым из файлов json
  3. "Подкладывать" сгенерированный CDR в BRT запросом POST http://localhost:8081/processCdrList
  4. Сравнивать код ответа и тело ответа с ожидаемым:
     а) Для валидного файла код ответа 200 ОК, тело ответа в формате
     [
    {
        "tariffBalanceChange": -50,
        "balanceChange": -268.5
    },
    {
        "tariffBalanceChange": 0,
        "balanceChange": -785.0
    }, .....
     b) Для невалидного файла код ответа 400 Bad Request / сообщение об ошибке
